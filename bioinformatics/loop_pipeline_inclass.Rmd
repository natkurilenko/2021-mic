---
jupyter:
  jupytext:
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.2'
      jupytext_version: 1.11.3
  kernelspec:
    display_name: Bash
    language: bash
    name: bash
---

```{bash}
source bioinf_config_inclass.sh
mkdir -p $LOOP_TRIM_DIR $LOOP_STAROUT_DIR
ls -l $LOOP_OUT_DIR 
```

```{bash}
for SRA_ACCESSION in "cat" "dog" "rabbit" "fish" "duck"
    do
        echo "A $SRA_ACCESSION is a good pet"
    done
```

```{bash}
for SRA_ACCESSION in "SRR12804464" ; do
    echo "Now Trimming: $SRA_ACCESSION"
    TrimmomaticPE \
        -threads $TOTAL_THREADS \
        -phred33 \
        $RAW_FASTQ_DIR/${SRA_ACCESSION}_1.fastq.gz \
        $RAW_FASTQ_DIR/${SRA_ACCESSION}_2.fastq.gz \
        $LOOP_TRIM_DIR/${SRA_ACCESSION}_1_trimmed.fastq.gz \
        $LOOP_TRIM_DIR/${SRA_ACCESSION}_1_unpaired.fastq.gz \
        $LOOP_TRIM_DIR/${SRA_ACCESSION}_2_trimmed.fastq.gz \
        $LOOP_TRIM_DIR/${SRA_ACCESSION}_2_unpaired.fastq.gz \
        ILLUMINACLIP:TruSeq2-PE.fa:2:30:10:2:keepBothReads SLIDINGWINDOW:4:15 LEADING:3 TRAILING:3 MINLEN:36 
    
    echo "Now Mapping: $SRA_ACCESSION"

    STAR \
        --runMode alignReads \
        --twopassMode None \
        --genomeDir $GENOME_DIR \
        --readFilesCommand gunzip -c \
        --readFilesIn $LOOP_TRIM_DIR/${SRA_ACCESSION}_1_trimmed.fastq.gz $LOOP_TRIM_DIR/${SRA_ACCESSION}_2_trimmed.fastq.gz \
        --outFileNamePrefix ${LOOP_STAROUT_DIR}/${SRA_ACCESSION}_ \
        --quantMode GeneCounts \
        --outSAMtype None \
        --runThreadN $TOTAL_THREADS
done
```

```{bash}
ls ${LOOP_OUT_DIR}/*
```
